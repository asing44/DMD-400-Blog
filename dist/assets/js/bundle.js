
const header=document.getElementById("header");let lastPos=document.documentElement.scrollTop;window.addEventListener("scroll",(()=>{const e=document.documentElement.scrollTop;e>lastPos?e>header.offsetHeight&&(header.classList.add("-translate-y-full"),header.classList.remove("shadow-md")):(header.classList.remove("-translate-y-full"),header.classList.add("shadow-md")),lastPos=e}),!1);const menu=document.getElementById("menu"),searchBox=document.getElementById("search"),menuToggle=document.getElementById("menu-toggle");menuToggle.addEventListener("click",(()=>{menu.classList.toggle("hidden"),searchBox.classList.toggle("hidden")}),!1);const lazyImages=document.getElementsByClassName("lazy");document.addEventListener("DOMContentLoaded",(()=>{[...lazyImages].forEach((e=>{const t=e.dataset.src;e.setAttribute("src",t),e.removeAttribute("data-src")}))}),!1);const layout=new rive.Layout({fit:rive.Fit.FitWidth,alignment:rive.Alignment.Center}),riveCanvas=document.getElementById("rive-canvas"),riveInstance=new rive.Rive({src:"/DMD-400-Blog/assets/rive/rive-vibe.riv",stateMachines:"State Machine 1",canvas:riveCanvas,layout:layout,autoplay:!0,onLoad:()=>{riveInstance.resizeDrawingSurfaceToCanvas()}});class SearchPosts{async init(){const e=new URL(location.href).searchParams;this.start=Number(e.get("start"))||1,this.size=Number(e.get("size"))||12,this.posts=await fetch("../index.json").then((e=>e.json())),this.render(e.get("q"))}render(e){const t=document.getElementById("wrapper"),s=document.getElementById("searchbox"),n=document.getElementById("info");if(e="string"==typeof e?e.toLowerCase():"",history.replaceState(null,null,`?q=${e}&start=${this.start}&size=${this.size}`),s.value=e,t.innerHTML="",""===e)return void(n.textContent="Enter keywords in the search box above");const a=this.posts.filter((t=>-1!==t.title.toLowerCase().indexOf(e)));if(0===a.length)return void(n.textContent=`No results were found for "${e}"`);const o=this.size,r=this.start-1,i=a.slice(r,r+o),l=r+i.length,d=this.start<l||1!==this.start?`${this.start} to ${l}`:this.start,c=a.length>1?"s":"";n.textContent=`Showing ${d} of ${a.length} result${c} found for "${e}"`,i.forEach((e=>{const{url:s,title:n,date:a}=e;t.innerHTML+=`\n        <div class="w-full sm:w-1/2 md:w-1/3 self-stretch p-2 mb-2">\n          <a href="${s}">\n            <div class="rounded shadow-md h-full px-6 py-5">\n              <div class="font-semibold text-lg mb-2">${n}</div>\n              <p class="text-gray-700 mb-1" title="Published date">${a}</p>\n            </div>\n          </a>\n        </div>\n      `}))}}if("/search/"===location.pathname){const e=document.getElementById("searchbox"),t=new SearchPosts;t.init(),e.addEventListener("keyup",debounce((function(){t.render(this.value)}),400))}function debounce(e,t){let s,n=[];return function(...a){return new Promise((o=>{clearTimeout(s),s=setTimeout((()=>{s=null;const t=e.apply(this,a);for(o of n)o(t);n=[]}),t),n.push(o)}))}}